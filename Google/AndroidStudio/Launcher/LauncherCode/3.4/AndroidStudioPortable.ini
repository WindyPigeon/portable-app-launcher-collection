[Launch]
ProgramExecutable   =Android Studio\bin\studio.exe
ProgramExecutable64 =Android Studio\bin\studio64.exe
DirectoryMoveOK=yes
SupportsUNC=yes

[Activate]
Registry=true
XML=true

[RegistryKeys]
com.java.util.prefs =HKCU\Software\JavaSoft\Prefs\google
com.google.gct      =HKCU\Software\JavaSoft\Prefs\com\google\gct

[RegistryCleanupIfEmpty]
1   =HKCU\Software\JavaSoft\Prefs\com\google
2   =HKCU\Software\JavaSoft\Prefs\com
3   =HKCU\Software\JavaSoft\Prefs
4   =HKCU\Software\JavaSoft

[DirectoriesMove]
Library\Application Support\Google\consentOptions   =%APPDATA%\Google\consentOptions
Library\Caches\AndroidStudio3.4                     =%SystemDrive%\Users\%USERNAME%\.AndroidStudio3.4\system
Library\Preferences\AndroidStudio3.4                =%SystemDrive%\Users\%USERNAME%\.AndroidStudio3.4\config
.android                                            =%SystemDrive%\Users\%USERNAME%\.android
.gradle                                             =%SystemDrive%\Users\%USERNAME%\.gradle

[DirectoriesCleanupIfEmpty]
1   =%APPDATA%\Google
2   =%APPDATA%
3   =%SystemDrive%\Users\%USERNAME%\.AndroidStudio3.4
4   =%SystemDrive%\Users\%USERNAME%
5   =%SystemDrive%\Users
6   =%SystemDrive%

[FileWrite1]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\ide.general.xml
Find=%PAL:LastDrive%%PAL:LastPackagePartialDir%\
Replace=%PAL:Drive%%PAL:PackagePartialDir%\

[FileWrite2]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\ide.general.xml
Find=%PAL:LastDrive%%PAL:LastPortableAppsBaseDir%\
Replace=%PAL:Drive%%PAL:PortableAppsBaseDir%\

[FileWrite3]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\ide.general.xml
Find=%PAL:LastDrive%\
Replace=%PAL:Drive%\

[FileWrite4]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\jdk.table.xml
Find=%PAL:LastDrive%%PAL:LastPackagePartialDir:ForwardSlash%/
Replace=%PAL:Drive%%PAL:PackagePartialDir:ForwardSlash%/

[FileWrite5]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\jdk.table.xml
Find=%PAL:LastDrive%%PAL:LastPortableAppsBaseDir:ForwardSlash%/
Replace=%PAL:Drive%%PAL:PortableAppsBaseDir:ForwardSlash%/

[FileWrite6]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\jdk.table.xml
Find=%PAL:LastDrive%/
Replace=%PAL:Drive%/

[FileWrite7]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\other.xml
Find=%PAL:LastDrive%%PAL:LastPackagePartialDir:ForwardSlash%/
Replace=%PAL:Drive%%PAL:PackagePartialDir:ForwardSlash%/

[FileWrite8]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\other.xml
Find=%PAL:LastDrive%%PAL:LastPortableAppsBaseDir:ForwardSlash%/
Replace=%PAL:Drive%%PAL:PortableAppsBaseDir:ForwardSlash%/

[FileWrite9]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\other.xml
Find=%PAL:LastDrive%/
Replace=%PAL:Drive%/

[FileWrite10]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\path.macros.xml
Find=%PAL:LastDrive%%PAL:LastPackagePartialDir%\
Replace=%PAL:Drive%%PAL:PackagePartialDir%\

[FileWrite11]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\path.macros.xml
Find=%PAL:LastDrive%%PAL:LastPortableAppsBaseDir%\
Replace=%PAL:Drive%%PAL:PortableAppsBaseDir%\

[FileWrite12]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\path.macros.xml
Find=%PAL:LastDrive%\
Replace=%PAL:Drive%\

[FileWrite13]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\project.default.xml
Find=%PAL:LastDrive%%PAL:LastPackagePartialDir%\
Replace=%PAL:Drive%%PAL:PackagePartialDir%\

[FileWrite14]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\project.default.xml
Find=%PAL:LastDrive%%PAL:LastPortableAppsBaseDir%/
Replace=%PAL:Drive%%PAL:PortableAppsBaseDir%\

[FileWrite15]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\project.default.xml
Find=%PAL:LastDrive%\
Replace=%PAL:Drive%\

[FileWrite16]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\recentProjects.xml
Find=%PAL:LastDrive%%PAL:LastPackagePartialDir%\
Replace=%PAL:Drive%%PAL:PackagePartialDir%\

[FileWrite17]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\recentProjects.xml
Find=%PAL:LastDrive%%PAL:LastPortableAppsBaseDir%\
Replace=%PAL:Drive%%PAL:PortableAppsBaseDir%\

[FileWrite18]
Type=Replace
File=%PAL:DataDir%\Library\Preferences\AndroidStudio3.4\options\recentProjects.xml
Find=%PAL:LastDrive%\
Replace=%PAL:Drive%\

[FileWrite19]
Type=Replace
File=%PAL:DataDir%\Library\Caches\AndroidStudio3.4\.home
Find=%PAL:LastDrive%%PAL:LastPackagePartialDir%\
Replace=%PAL:Drive%%PAL:PackagePartialDir%\

[FileWrite20]
Type=Replace
File=%PAL:DataDir%\Library\Caches\AndroidStudio3.4\.home
Find=%PAL:LastDrive%%PAL:LastPortableAppsBaseDir%/
Replace=%PAL:Drive%%PAL:PortableAppsBaseDir%\

[FileWrite21]
Type=Replace
File=%PAL:DataDir%\Library\Caches\AndroidStudio3.4\.home
Find=%PAL:LastDrive%\
Replace=%PAL:Drive%\
